---
import { useTranslations } from '../i18n/utils';

interface Props {
    lang: 'pt' | 'en' | 'es';
}

const { lang } = Astro.props;
const t = useTranslations(lang);

const waMessage = t('whatsapp.message');
const waLink = `https://wa.me/5561995021067?text=${encodeURIComponent(waMessage)}`;
---
<section class="relative min-h-screen flex items-center pt-20 overflow-hidden" id="inicio">
    <div class="absolute inset-0 z-0">
        <div class="absolute inset-0 bg-gradient-to-r from-secondary via-secondary/95 to-secondary/80 z-10"></div>
        <!-- Placeholder for background image -->
        <img src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?q=80&w=2053&auto=format&fit=crop" alt="Background" class="w-full h-full object-cover opacity-50" />
    </div>

    <div class="container mx-auto px-4 z-10 grid md:grid-cols-2 gap-12 items-center">
        <div class="space-y-6 animate-fade-in-up">
            <span class="inline-block px-4 py-2 rounded-full bg-primary/10 text-primary font-semibold text-sm">
                {t('hero.subtitle')}
            </span>
            <h1 class="text-5xl md:text-6xl font-heading font-bold text-dark leading-tight">
                {t('hero.title')}
            </h1>
            <p class="text-xl text-dark/80 max-w-lg">
                {t('hero.desc')}
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <a href={waLink} target="_blank" class="bg-primary text-white px-8 py-4 rounded-full font-bold hover:bg-primary/90 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>
                    {t('hero.cta')}
                </a>
                <a href="mailto:info@atypicalbrains.win" class="bg-white text-dark border-2 border-primary/20 px-8 py-4 rounded-full font-bold hover:bg-primary/5 transition-all flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    {t('hero.email')}
                </a>
            </div>
        </div>


		<div class="relative rounded-4xl overflow-hidden shadow-2xl border-4 border-white transition-transform duration-500">
			<div id="video-placeholder-container" data-video-id="m4tdp7WQsBw" class="aspect-video bg-dark/10 flex items-center justify-center group cursor-pointer relative">
				<img src="/thumbnail-video.avif" alt="Video Thumbnail" class="w-full h-full object-cover" />
				<div class="absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-colors"></div>
				<div class="absolute inset-0 flex items-center justify-center">
					<div class="w-20 h-20 bg-white/90 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
						<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" class="text-primary ml-1"><polygon points="5 3 19 12 5 21 5 3"/></svg>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Seleciona o contêiner e pega o ID do vídeo
			const container = document.getElementById('video-placeholder-container');
			const videoId = container.dataset.videoId;

			if (container && videoId) {
				container.addEventListener('click', () => {
					// 1. Cria o iframe do YouTube
					const iframe = document.createElement('iframe');
					iframe.setAttribute('frameborder', '0');
					iframe.setAttribute('allowfullscreen', '');
					iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');

					// 2. Define o src para carregar e iniciar automaticamente o vídeo
					// O parâmetro 'autoplay=1' garante que o vídeo comece a tocar
					iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;

					// 3. Aplica estilos para ocupar todo o espaço
					iframe.style.width = '100%';
					iframe.style.height = '100%';

					// 4. Substitui o placeholder pelo iframe
					container.innerHTML = ''; // Limpa a imagem e o ícone de play
					container.classList.remove('cursor-pointer'); // Remove o cursor de clique
					container.appendChild(iframe); // Adiciona o player do vídeo
				});
			}
		</script>

    </div>
</section>
